<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>APEX è©¦åˆçµæœå…¥åŠ›</title>
  <style>
    body {
      font-family: "Hiragino Maru Gothic ProN", sans-serif;
      background-color: #f7fcfc;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 400px;
      margin: 30px auto;
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #47b6a2;
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
      color: #444;
    }
    textarea, input {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #97eadb;
      margin-top: 4px;
      resize: vertical;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      background-color: #97eadb;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background-color: #7dd2c3;
    }
    #status {
      margin-top: 12px;
      text-align: center;
      font-weight: bold;
      color: #47b6a2;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
</head>
<body>
  <div class="container">
    <h1>è©¦åˆçµæœå…¥åŠ›</h1>
    
    <label>è©¦åˆç•ªå·ï¼š</label>
    <input type="number" id="matchNumber" />

    <label>ãƒãƒ¼ãƒ Aã®ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆ1è¡Œã”ã¨ã«å…¥åŠ›ï¼‰ï¼š</label>
    <textarea id="teamA" rows="4" placeholder="ã‚‚ã­ã“\nãã‚ƒãŸã‚“\nã‚Šã£ãŸã‚“"></textarea>

    <label>ãƒãƒ¼ãƒ Aã®ã‚­ãƒ«æ•°ï¼š</label>
    <input type="number" id="teamAKills" />

    <label>ãƒãƒ¼ãƒ Bã®ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆ1è¡Œã”ã¨ã«å…¥åŠ›ï¼‰ï¼š</label>
    <textarea id="teamB" rows="4" placeholder="ã½ã‚“ãš\nã‚†ã‚ã¡\nã‚ãŠã„"></textarea>

    <label>ãƒãƒ¼ãƒ Bã®ã‚­ãƒ«æ•°ï¼š</label>
    <input type="number" id="teamBKills" />

    <button id="saveResult">ä¿å­˜ã™ã‚‹</button>
    <p id="status"></p>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    // ğŸ”¹ Firebaseã®è¨­å®šï¼ˆè‡ªåˆ†ã®æƒ…å ±ã«ç½®ãæ›ãˆã¦ã­ï¼‰
    const firebaseConfig = {
  apiKey: "AIzaSyBbHLIr4GWkZ3Mfbg3M8wOY68X1ITrE-yw",
  authDomain: "match-result-ea475.firebaseapp.com",
  databaseURL: "https://match-result-ea475-default-rtdb.firebaseio.com",
  projectId: "match-result-ea475",
  storageBucket: "match-result-ea475.firebasestorage.app",
  messagingSenderId: "759877853492",
  appId: "1:759877853492:web:a10935960bf8230af90561"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.getElementById("saveResult").addEventListener("click", async () => {
      const matchNumber = document.getElementById("matchNumber").value;
      const teamA = document.getElementById("teamA").value
                      .split("\n")
                      .map(s => s.trim())
                      .filter(s => s !== "");
      const teamAKills = Number(document.getElementById("teamAKills").value);
      const teamB = document.getElementById("teamB").value
                      .split("\n")
                      .map(s => s.trim())
                      .filter(s => s !== "");
      const teamBKills = Number(document.getElementById("teamBKills").value);

      if (!matchNumber || teamA.length === 0 || teamB.length === 0) {
        document.getElementById("status").innerText = "âš ï¸ å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
        return;
      }

      try {
        await addDoc(collection(db, "apex_results"), {
          matchNumber: Number(matchNumber),
          teamA, teamAKills,
          teamB, teamBKills,
          createdAt: new Date()
        });
        document.getElementById("status").innerText = "âœ… ä¿å­˜ã—ã¾ã—ãŸï¼";
      } catch (e) {
        console.error(e);
        document.getElementById("status").innerText = "âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";
      }
    });
  </script>
</body>
</html>