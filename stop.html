<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’æ­¢ã‚ã‚‹</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script>
    // Firebase åˆæœŸåŒ–ï¼ˆã™ã§ã«ä½¿ã£ã¦ã„ã‚‹è¨­å®šã«ç½®ãæ›ãˆã¦ï¼‰
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
</head>
<body>
  <h1>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’æ­¢ã‚ã‚‹ãƒšãƒ¼ã‚¸</h1>

  <div id="content" style="display: none;">
    <label>ã‚ã„ã“ã¨ã°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</label><br>
    <input type="text" id="keyword" />
    <button onclick="checkKeyword()">é€ä¿¡</button>
    <p id="error" style="color: red;"></p>
    <div id="stopSection" style="display: none; margin-top: 1em;">
      <button onclick="stopRoulette()" style="font-size: 1.2em;">ğŸ›‘ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’æ­¢ã‚ã‚‹</button>
    </div>
  </div>

  <script>
    const correctKeyword = "ã­ã“"; // â† åˆè¨€è‘‰ï¼ˆè‡ªç”±ã«å¤‰ãˆã¦OKï¼‰

    // spinningã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ã€å›ã£ã¦ã‚‹ã¨ãã ã‘ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
    firebase.database().ref("roulette/spinning").on("value", (snapshot) => {
      if (snapshot.val() === true) {
        document.getElementById("content").style.display = "block";
      } else {
        document.body.innerHTML = "<h2>ç¾åœ¨ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã¯å›ã£ã¦ã„ã¾ã›ã‚“ã€‚</h2>";
      }
    });

    function checkKeyword() {
      const input = document.getElementById("keyword").value.trim();
      if (input === correctKeyword) {
        document.getElementById("stopSection").style.display = "block";
        document.getElementById("error").textContent = "";
      } else {
        document.getElementById("error").textContent = "åˆè¨€è‘‰ãŒé•ã„ã¾ã™ã€‚";
      }
    }

    function stopRoulette() {
      firebase.database().ref("roulette/spinning").set(false).then(() => {
        alert("ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’åœæ­¢ã—ã¾ã—ãŸï¼");
        window.location.href = "index.html";
      });
    }
  </script>
</body>
</html>